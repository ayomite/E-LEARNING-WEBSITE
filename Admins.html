<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Login</title>
<style>
body { font-family: Arial, sans-serif; background:#eef2f7; display:flex; justify-content:center; align-items:center; height:100vh; }
.container { background:#fff; padding:30px; border-radius:10px; box-shadow:0 6px 20px rgba(0,0,0,0.1); width:400px; }
h2 { text-align:center; color:#0066ff; margin-bottom:20px; }
input { width:100%; padding:10px; margin-bottom:15px; border:1px solid #ccc; border-radius:6px; }
button { width:100%; padding:12px; background:#0066ff; color:#fff; font-weight:bold; border:none; border-radius:6px; cursor:pointer; }
button:hover { background:#004fcc; }
.message { text-align:center; margin-bottom:15px; color:red; }
</style>
</head>
<body>

<div class="container">
<h2>Admin Login</h2>
<div class="message" id="msg"></div>
<input type="email" id="email" placeholder="Enter your email" required>
<input type="password" id="password" placeholder="Enter your password" required>
<button id="loginBtn">Login</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey:"AIzaSyDwqKHykKby2Hl4kq9YgvuE5D-m39o8s-A",
  authDomain:"registration-portal-a9e15.firebaseapp.com",
  projectId:"registration-portal-a9e15"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

const emailInput = document.getElementById("email");
const passwordInput = document.getElementById("password");
const msg = document.getElementById("msg");
const loginBtn = document.getElementById("loginBtn");

loginBtn.addEventListener("click", async () => {
  msg.textContent = "";
  const email = emailInput.value.trim();
  const password = passwordInput.value.trim();

  try {
    const userCredential = await signInWithEmailAndPassword(auth, email, password);
    const uid = userCredential.user.uid;

    // Check if user is admin
    const adminDoc = await getDoc(doc(db, "admins", uid));
    if (!adminDoc.exists()) {
      msg.textContent = "Access denied. You are not an admin.";
      await auth.signOut();
      return;
    }

    // Redirect to secure admin page
    window.location.href = "admin.html";

  } catch(error) {
    msg.textContent = error.message;
  }
});
</script>

</body>
</html>
